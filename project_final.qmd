---
title: "PROJECT"
subtitle: "BLAL BLA BLA"
author: anonymous
format:
  html:
    toc: true
    code-tools: true
    code-line-numbers: true
    msainfont: Georgia, serif
    page-layout: article
  pdf:  
    number-sections: true
    code-annotations: none
editor: source
---

:::: {.content-hidden when-format="pdf"}
::: {.callout-warning collapse=false}
 
## Setup

Install packages:

```{r}
#| label: Setup
remotes::install_github("higgi13425/medicaldata")
library(medicaldata)
library(dplyr)
library(brms)
library(corrplot)
library(rstanarm)
library(ggplot2)
library(loo)
library(rstanarm)
library(caret)
```

Import the data:

```{r}
#| label: Importing data
cath <- medicaldata::cath
```

:::
::::


# Introduction 

- Background
- Problem formulation/scope
- Main modeling idea
- Some picture of the data?

# Data Desctription

- Data set:

```{r}
#| label: Data description
#| echo: false
#| message: false
#| warning: false

head(cath)
```

Histograms and barplot of the explanatory variables:

```{r}
#| label: Univariate analysis part 1
#| echo: false

variable_names = names(cath)
par(mfrow = c(1,4))
barplot(table(cath[[1]]), main = variable_names[1])
for(i in 2:4){
  hist(cath[[i]], main = variable_names[i])
}

```

Barplots of the responsive variables:

```{r}
#| label: Univariate analysis part 2
#| echo: false

par(mfrow = c(1,2))
for(i in 5:6){
  barplot(table(cath[,i]), main = variable_names[i])
}
```

Explanation on data preprocessing (removing NA rows, scaling variables, removing tvdlm etc.)

```{r}
#| label: Data preprocessing
#| echo: false
#| warning: false
#| message: false

# Remove tvdlm column
# Remove rows with at least one NA value
cath <- cath %>%
  na.omit() %>%
  select(-tvdlm)

# Scale the variables
for (i in 1:(ncol(cath)-2)){
    cath[i] <- scale(cath[i])
}

# Make response variable a factor
cath$sigdz <- as.factor(cath$sigdz)

```

- Histograms
- Correlations
- Has it been used in previous studies?


# Mathematical Model

- Bayesian logistic regression
- Likelihood
- Priors
- Posteriors


# Model Definitions and Implementation

- Tie mathematical model to our implementation
- Ndraws, warmup, etc.
```{r}
# model code
```


# Model Evaluation
- Rhat, ESS, HMC divergences, pp_check(), loo_compare(), classification accuracy
- Prior sensitivity analysis


# Discussion
- Problems, potential improvements?
- Conclusion of analysis

# Lessons Learned


# References

